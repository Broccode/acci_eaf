## API Interaction Layer (Hilla Endpoints)

- **Client/Service Structure:**

  - All backend interactions from the frontend will primarily use the **type-safe TypeScript client
    modules automatically generated by Hilla** from Kotlin `@BrowserCallable` services. These are
    located in `Frontend/generated/endpoints.js` (or individual service files like
    `Frontend/generated/MyService.js`) within each Hilla application's frontend directory.
  - No separate `apiClient.ts` (like an Axios instance) is generally needed for Hilla backend calls,
    as Hilla handles the communication protocol.
  - Frontend components or custom hooks will directly import and call methods on these generated
    Hilla services. Example:

        ```typescript
        import { TenantService } from 'Frontend/generated/endpoints'; // Or specific service
        // ...
        const newTenant = await TenantService.createTenant({ name: 'NewCo', adminEmail: 'admin@newco.com' });
        ```

- **Error Handling & Retries (Frontend for Hilla Calls):**
  - Hilla service calls return Promises. Errors from the backend (including
    `EndpointValidationException` for business rule violations or Spring Security access denied
    exceptions) will cause the Promise to reject.
  - Frontend code **MUST** use `try/catch` blocks or `.catch()` on Promises to handle these errors
    gracefully.
  - Validation errors (from `EndpointValidationException`) often contain structured data about which
    parameters failed validation, which can be used to display user-friendly messages next to form
    fields.
  - Generic network errors or server unavailability will also result in rejected Promises. The UI
    should display appropriate feedback (e.g., "Could not connect to server. Please try again
    later.").
  - Client-side retry logic for Hilla calls is generally **not recommended** by default unless for
    specific idempotent read operations. Command operations should typically not be retried
    automatically by the client without user confirmation due to potential side effects. The backend
    services themselves should be designed for idempotency where appropriate for retries at that
    level.
